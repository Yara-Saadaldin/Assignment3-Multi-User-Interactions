<!DOCTYPE html>
<html>


    <head>
      <title>Yara Saadaldin_Assignment 3</title>
      <meta charset="utf-8" />
      <script src= "https://aframe.io/releases/1.1.0/aframe.min.js"></script>
      <script src= "https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
      <script src= "https://unpkg.com/aframe-event-set-component@4.0.0/dist/aframe-event-set-component.min.js"></script>
      <script src="https://unpkg.com/aframe-play-sound-on-event@1.0.2/dist/aframe-play-sound-on-event.min.js"></script> 
      <script src="/socket.io/socket.io.js"></script>
    </head>


    <body>
      <a-scene>
        <!--Environment-->
            <a-entity environment= "preset: forest;"></a-entity>

        <!--Camera-->
            <a-entity id=                                    "Camera" 
                      camera=                                "" 
                      look-controls=                         "" 
                      wasd-controls=                         "" 
                      position=                              "-3  1  4.2" 
                      data-aframe-inspector-original-camera= "" 
                      rotation=                              "" 
                      cursor=                                "rayOrigin: mouse" 
                      geometry=                              "primitive: sphere;  radius: 0.005" 
                      material=                              "color: #000000;  shader: flat;  opacity: 0.5" 
                      raycaster=                             "direction: -0.4  0.4  -0.8;  origin: -1.2 4 16.6; useWorldCoordinates: true">
            </a-entity>

        <!--3D assets-->
            <a-asset-item id= "Baltoy"           response-type= "arraybuffer"     src= "/assets/Baltoy.glb">           </a-asset-item>
            <a-asset-item id= "Bulbasaur"        response-type= "arraybuffer"     src= "/assets/Bulbasaur.glb">        </a-asset-item>
            <a-asset-item id= "Charmander"       response-type= "arraybuffer"     src= "/assets/Charmander.glb">       </a-asset-item>
            <a-asset-item id= "Eevee"            response-type= "arraybuffer"     src= "/assets/Eevee.glb">            </a-asset-item>
            <a-asset-item id= "Magikarp"         response-type= "arraybuffer"     src= "/assets/Magikarp.glb">         </a-asset-item>
            <a-asset-item id= "Mew"              response-type= "arraybuffer"     src= "/assets/Mew.glb">              </a-asset-item>
            <a-asset-item id= "Minccino"         response-type= "arraybuffer"     src= "/assets/Minccino.glb">         </a-asset-item>
            <a-asset-item id= "Pikachu"          response-type= "arraybuffer"     src= "/assets/Pikachu.glb">          </a-asset-item>
            <a-asset-item id= "Pokeball"         response-type= "arraybuffer"     src= "/assets/Pokeball.glb">         </a-asset-item>
            <a-asset-item id= "Squirtle"         response-type= "arraybuffer"     src= "/assets/Squirtle.glb">         </a-asset-item>
            <a-asset-item id= "Turtlesaurus"     response-type= "arraybuffer"     src= "/assets/Turtlesaurus.glb">     </a-asset-item>

        <!--Sounds-->
          <!---Background Music--->
             <a-assets>
                <audio id="Background Music" src="/assets/Background Music.mp3" preload="auto" crossorigin="anonymous"></audio>
            </a-assets>
                <a-entity sound="src: /assets/Background Music.mp3; autoplay: true; loop: true; volume: 0.2; distanceModel: linear; positional: false"></a-entity>
          <!--Sound for Collecting Pokeball-->
            <a-assets>
                <audio id="Collecting Pokeball" src="/assets/Collecting Pokeball.mp3"></audio>
            </a-assets>
            <!--Sound for Finding Pikatchu-->
            <a-assets>
                <audio id="Finding Pikatchu" src="/assets/Finding Pikachu.mp3"></audio>
            </a-assets>

      <!-------------------Pokeballs------------------->
      <!--When the player clicks on any of the Pokeballs they disappear-->
      <a-entity id= "Pokeballs">
          <!--Pokeball #1-->
            <a-entity class=                "Pokebal #l"     
                      position=             "14   0.2  -25"     
                      scale=                "0.2  0.2  0.2"     
                      gltf-model=           "/assets/Pokeball.glb" 
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter;  visible: false" >
            </a-entity>
          <!--Pokeball #2-->
            <a-entity class=                "Pokeball #2"     
                      position=             "-11  0.2  -9.3"     
                      scale=                "0.2  0.2   0.2"     
                      gltf-model=           "/assets/Pokeball.glb" 
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter;  visible: false">
            </a-entity>
          <!--Pokeball #3-->
            <a-entity class=                "Pokeball #3"     
                      position=             "0.5  0.2  -31"     
                      scale=                "0.2  0.2  0.2"     
                      gltf-model=           "/assets/Pokeball.glb"
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter;  visible: false">
            </a-entity>
          <!--Pokeball #4-->
            <a-entity class=               "Pokeball #4"     
                      position=            "-16  0.2  -21"     
                      scale=               "0.2  0.2  0.2"     
                      gltf-model=          "/assets/Pokeball.glb" 
                      sound=               "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event= "mode: toggle-stop; event: click"
                      event-set__enter=    "_event: mouseenter;  visible: false">
            </a-entity>
          <!--Pokeball #5-->
            <a-entity class=                "Pokeball #5" 
                      position=             "11   0.2    0" 
                      scale=                "0.2  0.2  0.2" 
                      gltf-model=           "/assets/Pokeball.glb" 
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter;  visible: false" >
            </a-entity>
        <!--Pokeball #6-->
            <a-entity class=                "Pokeball #6" 
                      position=             "22   0.2   -9" 
                      scale=                "0.2  0.2  0.2" 
                      gltf-model=           "/assets/Pokeball.glb" 
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter;  visible: false">
            </a-entity>
        <!--Pokeball #7-->
            <a-entity class=                "Pokeball #7" 
                      position=             "-18  0.2    0" 
                      scale=                "0.2  0.2  0.2" 
                      gltf-model=           "/assets/Pokeball.glb" 
                      sound=                "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter; visible: false">
            </a-entity>
        <!--Pokeball #8-->
            <a-entity class=                 "Pokeball #8" 
                      position=              "4    0.2   13" 
                      scale=                 "0.2  0.2  0.2" 
                      gltf-model=            "/assets/Pokeball.glb" 
                      sound=                 "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=   "mode: toggle-stop; event: click"
                      event-set__enter=      "_event: mouseenter; visible: false">
            </a-entity>
        <!--Pokeball #9-->
            <a-entity class=                 "Pokeball #9" 
                      position=              "-3   0.2    0" 
                      scale=                 "0.2  0.2  0.2" 
                      gltf-model=            "/assets/Pokeball.glb" 
                      sound=                 "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=   "mode: toggle-stop; event: click"
                      event-set__enter=      "_event: mouseenter; visible: false">
            </a-entity>
        <!--Pokeball #10-->
            <a-entity class=                 "Pokeball #10" 
                      position=              "-15  0.2    9"
                      scale=                 "0.2  0.2  0.2" 
                      gltf-model=            "/assets/Pokeball.glb" 
                      sound=                 "src: #Collecting Pokeball;  volume: 2"
                      play-sound-on-event=   "mode: toggle-stop; event: click"
                      event-set__enter=      "_event: mouseenter; visible: false">
            </a-entity>
      </a-entity>

      <!-------------------Pokemons------------------->
        <!--Baltoy-->
            <a-entity id=          "Baltoy" 
                      position=    "-21.4  1.4    1" 
                      scale=       "0.5    0.5  0.5" 
                      gltf-model=  "/assets/Baltoy.glb" 
                      animation=   "property: position; to: -21.4  1.6  1;     dir: alternate;     loop: true">
            </a-entity>
        <!--Bulbasaur-->
            <a-entity id=          "Bulbasaur" 
                      position=    "-19   1    32" 
                      scale=       "0.5  0.5  0.5" 
                      gltf-model=  "/assets/Bulbasaur.glb" 
                      rotation=    "0 0 -13.538992698941353"
                      animation=   "property: position; to: -19  1.2  32;     dir: alternate;     loop: true">
            </a-entity>
        <!--Charmander-->
            <a-entity id=          "Charmander" 
                      position=    "69   2.2  -11.5" 
                      scale=       "0.5  0.5    0.5" 
                      gltf-model=  "/assets/Charmander.glb" 
                      rotation=    ""
                      animation=   "property: position; to: 69  2.4  -11.5;     dir: alternate;     loop: true">
            </a-entity>
        <!--Eevee-->
            <a-entity id=          "Eevee" 
                      position=    "-3.7  0.15  27.2" 
                      scale=       "0.5   0.5    0.5" 
                      gltf-model=  "/assets/Eevee.glb" 
                      rotation=    ""
                      animation=   "property: position; to: -3.7  0.3  27.2;     dir: alternate;     loop: true">
            </a-entity>
        <!--Magikarp-->
            <a-entity id=          "Magikarp" 
                      position=    "-45.3  1.4  -0.8" 
                      scale=       "0.3    0.3   0.3" 
                      gltf-model=  "/assets/Magikarp.glb" 
                      rotation=    ""
                      animation=   "property: position; to: -45.3  1.6  -0.8;      dir: alternate;      loop: true">
            </a-entity>
        <!--Mew-->
            <a-entity id=          "Mew" 
                      position=    "3.3    0.15   -38.3" 
                      scale=       "0.007  0.007  0.007" 
                      gltf-model=  "/assets/Mew.glb" 
                      rotation=    ""
                      animation=   "property: position; to: 3.3  0.3  -38.3;      dir: alternate;      loop: true">
            </a-entity>
        <!--Minccino-->
            <a-entity id=          "Minccino" 
                      position=    "32.3  0.6  -2.3" 
                      scale=       "0.3   0.3   0.3" 
                      gltf-model=  "/assets/Minccino.glb" 
                      rotation=    ""
                      animation=   "property: position; to: 32.3  0.8  -2.3;      dir: alternate;      loop: true">
            </a-entity>
        <!--Pikachu-->
          <!--Disappears on click-->
            <a-entity id=                   "Pika" 
                      position=             "48.1   0.5   -44.14" 
                      scale=                "0.043  0.043  0.043" 
                      gltf-model=           "/assets/Pikachu.glb" 
                      rotation=             "" 
                      animation=            "property: position; to: 48.1  0.7  -44.3;      dir: alternate;      loop: true"
                      sound=                "src: #Finding Pikatchu;  volume: 2"
                      play-sound-on-event=  "mode: toggle-stop; event: click"
                      event-set__enter=     "_event: mouseenter; visible: false"
                      event-set__leave=     "_event: mouseleave; visible: false">
                    </a-entity>
                </a-entity>
            </a-entity>
        <!--Squirtle-->
            <a-entity id=          "Squirtle" 
                      position=    "20.3  1.1  15.9" 
                      scale=       "1      1      1" 
                      gltf-model=  "/assets/Squirtle.glb" 
                      rotation=    ""
                      animation=   "property: position; to: 20.3  1.3  15.9;     dir: alternate;     loop: true">
            </a-entity>
       <!--Turtlesaurus-->
            <a-entity id=          "Turtlesaurus" 
                      position=    "-7.4  0.2  -26.5" 
                      scale=       "0.4   0.4    0.4" 
                      gltf-model=  "/assets/Turtlesaurus.glb" 
                      rotation=    ""
                      animation=   "property: position; to: -7.4  0.4  -26.5;     dir: alternate;     loop: true">
            </a-entity>
        </a-entity>
    </a-scene>


     <!-------------------Socket------------------->
     <script>
        const socket = io();
        //When player connects
            socket.on('connect', (userData) => {
                //Print "Player is Connected" in the console with their socket ID
                    console.log('Player ' + socket.id +' is Connected!');
                    //When user finds Pikachu & clicks on it
                        document.querySelector('#Pika').addEventListener('mouseleave',function(){ 
                            //Emit to everyone that Pikachu is found 
                                 socket.emit('Pikachu_Found'); ///(Doesn't work :(((((!)
                            //Print "Pikachu found" in console
                                console.log(socket.id + ' Found Pikachu' );
                            //Then tell the user that they won
                                alert("You win!")
                            //Then redirect them back to index.html
                                location.replace("/index.html")
            });

            //Listens to the server on what to do when a player find Pikachu
                //Other players should get an alert that they lost and be redirected to index.html 
                socket.on('LOSER', (data) => {         ///(Doesn't work :(((((!)
                    console.log('Player lost');        ///(Doesn't work :(((((!)
                    alert("You lose!")                 ///(Doesn't work :(((((!)
                    location.replace("/index.html")    ///(Doesn't work :(((((!)
                });

         });
    </script>

  </body>
</html>